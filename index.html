<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>æˆ‘çš„ Firebase ç•™è¨€æ¿</title>
    <style>
        body { font-family: sans-serif; padding: 20px; background: #f4f4f4; }
        .box { background: white; padding: 20px; border-radius: 8px; max-width: 400px; margin: auto; }
        input { width: 80%; padding: 10px; margin-bottom: 10px; }
        button { padding: 10px 20px; cursor: pointer; background: #007bff; color: white; border: none; border-radius: 4px; }
    </style>
</head>
<body>
    <style>
        /* é€™è£¡ç¨å¾®ç¾åŒ–ä¸€ä¸‹æŒ‰éˆ• */
        button {
            background: linear-gradient(45deg, #007bff, #00d4ff);
            border: none;
            padding: 12px 24px;
            color: white;
            font-weight: bold;
            border-radius: 50px;
            box-shadow: 0 4px 15px rgba(0, 123, 255, 0.3);
            transition: 0.3s;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 123, 255, 0.4);
        }
    </style>
    <div class="box">
        <h2>ğŸš€ 2026 é›²ç«¯ç•™è¨€æ¿</h2>
        <input type="text" id="msgInput" placeholder="è¼¸å…¥æƒ³ä¿å­˜çš„è¨Šæ¯...">
        <button onclick="sendData()">é»æˆ‘å‚³é€</button>
        <p id="status" style="color: #666; font-size: 14px;"></p>
        
        <hr> <h3>æœ€è¿‘ç•™è¨€ï¼š</h3>
        <div id="msgList" style="text-align: left; max-height: 300px; overflow-y: auto;">
            </div>
    </div>

    <script type="module">
        // 1. å¼•å…¥ Firebase å¿…è¦çš„å·¥å…·
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc, onSnapshot, query, orderBy } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        
        // 2. é€™é‚Šå¡«å…¥ä½ å‰›å‰›æ‹¿åˆ°çš„ firebaseConfig
        const firebaseConfig = {
            // *** æŠŠä½ å‰›å‰›è¤‡è£½çš„é‚£ä¸€ä¸²å…§å®¹ï¼Œå®Œæ•´è²¼åˆ°é€™è£¡ä¾† ***
            apiKey: "AIzaSyD2UIeEEz1sObdXPGi209b9pzeK4JT7ku0",
            authDomain: "my-2026-db.firebaseapp.com",
            projectId: "my-2026-db",
            storageBucket: "my-2026-db.firebasestorage.app",
            messagingSenderId: "309383212061",
            appId: "1:309383212061:web:aa494b62a6517b8c99eaf4"
        };

        // 3. åˆå§‹åŒ– Firebase èˆ‡è³‡æ–™åº«
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // 4. å®šç¾©å‚³é€è³‡æ–™çš„å‹•ä½œ
        window.sendData = async function() {
            const text = document.getElementById('msgInput').value;
            if (!text) return alert("è«‹è¼¸å…¥æ–‡å­—");

            try {
                const docRef = await addDoc(collection(db, "messages"), {
                    content: text,
                    time: new Date()
                });
                document.getElementById('status').innerText = "ç™¼é€æˆåŠŸï¼ID: " + docRef.id;
                document.getElementById('msgInput').value = "";
            } catch (e) {
                console.error("éŒ¯èª¤: ", e);
                document.getElementById('status').innerText = "å¤±æ•—äº†ï¼Œè«‹æª¢æŸ¥è³‡æ–™åº«è¦å‰‡ã€‚";
            }
        }
        // 5. è‡ªå‹•è®€å–è³‡æ–™åº«å…§å®¹
        const q = query(collection(db, "messages"), orderBy("time", "desc")); // æŒ‰æ™‚é–“æ’åº
        
        onSnapshot(q, (snapshot) => {
            const msgList = document.getElementById('msgList');
            msgList.innerHTML = ""; // å…ˆæ¸…ç©ºèˆŠçš„
            
            snapshot.forEach((doc) => {
                const data = doc.data();
                const time = data.time ? data.time.toDate().toLocaleString() : ""; // è½‰æ›æ™‚é–“æ ¼å¼
                
                // è£½ä½œæ¯ä¸€æ¢ç•™è¨€çš„æ¨£å­
                const item = document.createElement('div');
                item.style.borderBottom = "1px dashed #ccc";
                item.style.padding = "10px 0";
                item.innerHTML = `
                    <div style="font-size: 16px;">${data.content}</div>
                    <div style="font-size: 12px; color: #999;">${time}</div>
                `;
                msgList.appendChild(item);
            });
        });
       
    </script>
</body>
</html>
